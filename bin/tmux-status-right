#!/bin/zsh

# For dark color
fg_color=colour007
# bg_color=colour000
bg_color=colour235
space_bg_color=$bg_color

uptime_info() {
    uptime | grep -o 'up [^,]*'
}

date_info() {
    date '+%Y/%m/%d %a %H:%M'
}

battery_info() {
    echo -n 'battery: '
    upower -i /org/freedesktop/UPower/devices/battery_BAT0 | \
        grep percentage | egrep -o '[0-9]*%'
    upower -i /org/freedesktop/UPower/devices/battery_BAT0 | \
        grep 'time to empty' | sed 's/^ *time to empty: *//'
}

docker_info() {
    echo -n 'docker: '
    docker ps | tail +2 | awk '{ print $NF }' ORS=', ' | sed 's/, $//'
}

# print info and extra space
print_info() {
    echo -n "#[fg=${fg_color},bg=${bg_color}]["
    echo -n $($1)
    echo -n "]#[bg=${space_bg_color}] "
}

display_commands=(myuptime mydate)

print_info uptime_info
print_info date_info
# print_info battery_info
systemctl status docker >/dev/null && print_info docker_info
